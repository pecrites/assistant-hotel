<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Assistant H√¥tel ‚Äì Client</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, sans-serif;
    background: #0b1f3a;
    color: white;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
.container {
    text-align: center;
    width: 90%;
    max-width: 400px;
}
h1 {
    margin-bottom: 30px;
}
button {
    width: 100%;
    padding: 25px;
    font-size: 22px;
    border-radius: 50px;
    border: none;
    background: #ffcc33;
    color: #000;
    cursor: pointer;
    margin-bottom: 20px;
}
button:active {
    background: #ffb300;
}
textarea, input {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
}
.small {
    font-size: 12px;
    opacity: 0.8;
}
</style>
</head>

<body>

<div class="container">
    <h1>üé§ Parlez √† la r√©ception</h1>

    <button onclick="startVoice()">üéôÔ∏è APPUYER POUR PARLER</button>

    <textarea id="text" rows="3" placeholder="Ou √©crivez votre demande (optionnel)"></textarea>
    <input id="room" placeholder="Num√©ro de chambre (ex: 203)" />

    <button onclick="sendText()">üì® Envoyer</button>

    <p class="small">Votre demande est transmise imm√©diatement</p>
</div>

<script>
function startVoice() {
    if (!('webkitSpeechRecognition' in window)) {
        alert("Reconnaissance vocale non support√©e");
        return;
    }

    const recognition = new webkitSpeechRecognition();
    recognition.lang = "fr-FR";
    recognition.interimResults = false;

    recognition.onresult = function(event) {
        const text = event.results[0][0].transcript;
        document.getElementById("text").value = text;
        sendText();
    };

    recognition.start();
}

async function sendText() {
    const text = document.getElementById("text").value;
    const room = document.getElementById("room").value || "Inconnue";

    if (!text) {
        alert("Parlez ou √©crivez un message");
        return;
    }

    await fetch("/api/send", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            room: room,
            text: text,
            lang: "fr"
        })
    });

    alert("‚úÖ Demande envoy√©e");
    document.getElementById("text").value = "";
}
</script>

</body>
</html>
